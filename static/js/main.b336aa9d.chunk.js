(this.webpackJsonpfire_alarm=this.webpackJsonpfire_alarm||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},90:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(50),s=n.n(r),i=(n(61),n(10)),o=(n(62),n(1));function u(){return Object(o.jsx)("div",{className:"footer",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("p",{children:"@TH CNTT 3"})})})}function l(){return Object(o.jsx)("div",{className:"header",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("h2",{children:"Hotel Management"})})})}var j,d,b,f=n(18),h=n(2),O=n(6),m=n.n(O),v=n(12),x=n(5),p="https://fire-alarm-api.glitch.me",g={fetchItems:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(p,"/room")).then((function(e){return e.json()})).then((function(e){return e.payload})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchItemById:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(p,"/room/get-by-id/").concat(t)).then((function(e){return e.json()})).then((function(e){return e.payload})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=g,y=n(11),_=n(27),I=y.a.img(j||(j=Object(i.a)(["\n    width: 100%;\n    object-fit:cover;\n    aspect-ratio:3/2;\n"]))),N=y.a.div(d||(d=Object(i.a)(["\n    position: relative;\n    border-radius:10px;\n    overflow:hidden;\n"]))),S=y.a.div(b||(b=Object(i.a)(["\n    position: absolute;\n    top:0;\n    bottom:0;\n    right:0;\n    left:0;\n    text-transform: uppercase;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    color: white;\n    font-size: 22px;\n    background-color: rgba(247,15,15,.7);\n    z-index:1;\n    font-weight: bold;\n"])));function k(e){var t=e.id,n=e.imageUrl,a=e.name,r=Object(_.a)(p),s=Object(x.a)(r,1)[0],i=Object(c.useState)(!1),u=Object(x.a)(i,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){s.on("SERVER_EMIT_ROOM_WITH_STATUS_".concat(t),(function(e){console.log(e),0===e.gas||0===e.flame?j(!0):j(!1)}))}),[t,s,j]),Object(o.jsxs)("div",{children:[Object(o.jsx)(f.b,{to:"/room/"+t,children:Object(o.jsxs)(N,{children:[Object(o.jsx)(I,{src:n,alt:""}),l?Object(o.jsx)(S,{children:a}):null]})}),l?null:Object(o.jsx)("h5",{children:a})]})}function E(){var e=Object(c.useState)([]),t=Object(x.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.fetchItems();case 3:t=e.sent,console.warn("rooms",t),a(t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[a]);var r=n.map((function(e){return Object(o.jsx)("div",{className:"col-md-4 vitri mb-4",children:Object(o.jsx)(k,{id:e._id,imageUrl:e.imageUrl,name:e.name})},e._id)}));return Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"row",children:r})})}function T(){return Object(o.jsx)(E,{})}var F,C={strPad:function(e,t,n){return(e+="")?e.length>=t?e:n.repeat(t-e.length)+e:e}},R=y.a.span(F||(F=Object(i.a)(["\n    font-size:1.5rem;\n"])));function D(e){var t=Object(c.useState)(new Date),n=Object(x.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){setInterval((function(){r(new Date)}),1e3)}),[r]);var s=C.strPad(a.getHours(),2,"0"),i=C.strPad(a.getMinutes(),2,"0"),u=C.strPad(a.getSeconds(),2,"0");return Object(o.jsxs)(R,{children:[s,":",i,":",u,'"']})}var M,P,B=n(4),H={fetchLastItemsByRoomId:function(e,t){return fetch("".concat(p,"/room-status/get-last-items-by-room-id/").concat(e,"?qty=").concat(t)).then((function(e){return e.json()})).then((function(e){return e.payload}))}},U=n(56),z={scales:{y:{beginAtZero:!0}},animation:{duration:0},responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{title:{display:!0,text:"Status Realtime Chart",font:{size:22,weight:"bold",lineHeight:1.2}}}},L=function(e){var t=e.labels,n=e.gasData,c=e.flameData;console.log(n,c,t);var a={labels:t,datasets:[{label:"Gas",data:n,fill:!1,backgroundColor:"#dbdbdb",borderColor:"#8c8c8c"},{label:"Flame",data:c,fill:!1,backgroundColor:"#FFB1C1",borderColor:"#FF6384"}]};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(U.a,{data:a,options:z})})},A=function(e,t){return 0===e[t]?1:0},J=function(e){var t=new Date(e.date),n=C.strPad(t.getHours(),2,"0"),c=C.strPad(t.getMinutes(),2,"0");return"".concat(n,":").concat(c)};function V(e){var t=e.item,n=Object(_.a)(p),a=Object(x.a)(n,1)[0],r=[],s=Object(c.useState)(r),i=Object(x.a)(s,2),u=i[0],l=i[1],j=Object(c.useState)(r),d=Object(x.a)(j,2),b=d[0],f=d[1],h=Object(c.useState)(r),O=Object(x.a)(h,2),g=O[0],w=O[1];return Object(c.useEffect)((function(){a.on("SERVER_EMIT_ROOM_WITH_STATUS_".concat(t._id),(function(e){console.log(e),l((function(t){var n=A(e,["gas"]);return 0===t.length?[n]:[].concat(Object(B.a)(t.slice(1)),[n])})),f((function(t){var n=A(e,["flame"]);return 0===t.length?[n]:[].concat(Object(B.a)(t.slice(1)),[n])})),w((function(t){var n=J(e);return 0===t.length?[n]:[].concat(Object(B.a)(t.slice(1)),[n])}))}))}),[t._id,a]),Object(c.useEffect)((function(){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var n,c,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.fetchLastItemsByRoomId(t._id,60);case 3:n=(n=e.sent).reverse(),console.log(n),c=n.map((function(e){return A(e,"gas")})),l(c),a=n.map((function(e){return A(e,"flame")})),f(a),r=n.map((function(e){return J(e)})),w(r),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[t._id,l,w,f]),Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("div",{className:"card-body",children:Object(o.jsx)(L,{gasData:u,flameData:b,labels:g})})})}var W,q=y.a.div(M||(M=Object(i.a)(["\n    display:flex;\n    align-items:center;\n    justify-content:space-between;\n"]))),G=y.a.img(P||(P=Object(i.a)(["\n    aspect-ratio:3/2;\n    border-radius:10px;\n    max-width:100%;\n"])));function Z(){var e=Object(c.useState)(void 0),t=Object(x.a)(e,2),n=t[0],a=t[1],r=Object(h.f)().id;Object(c.useEffect)((function(){var e=function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.fetchItemById(r);case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r,a]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"container",children:n?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"row mb-4",children:Object(o.jsx)("div",{className:"col-12",children:Object(o.jsxs)(q,{children:[Object(o.jsx)("h1",{children:n.name}),Object(o.jsx)(D,{})]})})}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-lg-3",children:Object(o.jsx)(G,{src:n.imageUrl,alt:""})}),Object(o.jsx)("div",{className:"col-lg-9",children:Object(o.jsx)(V,{item:n})})]})]}):null})})}var K=y.a.div(W||(W=Object(i.a)(["\n    display:flex;\n    flex-direction:column;\n    min-height:100vh;\n"])));var Q=function(){return Object(o.jsx)(f.a,{children:Object(o.jsxs)(K,{children:[Object(o.jsx)(l,{}),Object(o.jsx)("div",{className:"main",children:Object(o.jsxs)(h.c,{children:[Object(o.jsx)(h.a,{path:"/room/:id",children:Object(o.jsx)(Z,{})}),Object(o.jsx)(h.a,{path:"/",exact:!0,children:Object(o.jsx)(T,{})})]})}),Object(o.jsx)(u,{})]})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(Q,{})}),document.getElementById("root")),X()}},[[97,1,2]]]);
//# sourceMappingURL=main.b336aa9d.chunk.js.map